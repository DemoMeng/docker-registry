<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<link th:href="@{/layui/css/layui.css}" rel="stylesheet" />

<div class="demoTableThird" style="padding-left: 10px;padding-top:10px">
        搜索关键字：
    <div class="layui-inline">
        <input class="layui-input" name="keyword3" id="demoReload3" autocomplete="off" value="">
    </div>
    <button id="btn-reload-3"class="layui-btn" data-type="reload">搜索</button>
</div>
<table id="log-table" lay-filter="test"></table>
<script th:src="@{/layui/layui.js}"></script>
<script>

    layui.use('table', function() {
        let $ = layui.$;
        $(function(){
            //let token = layui.data("tokens").token;
            //ct();
            let table = layui.table;
            let documentWith = $(document).width();
            let documentHeight = $(document).height();
            console.log(documentWith);
            console.log(documentHeight);
            //第一个实例
            table.render({
                elem: '#log-table'
                ,method:"POST"
                ,url: '/image/tags/list' //数据接口
                ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
                    layout: ['limit','limits', 'count', 'prev','page','next', 'first','last','skip'] //自定义分页布局
                    ,limit:10
                    ,limits:[1,5,10,15]
                    ,groups: 5 //只显示 5 个连续页码
                }
                ,request:{
                    pageName:"pageCurrent",
                    limitName:"pageSize"
                }
                ,contentType:"application/json;charset=UTF-8"
                ,response: {
                    statusCode: 10000 //重新规定成功的状态码为 200，table 组件默认为 0
                }
                /*,headers: {token:token}*/
                ,cols: [
                    [
                        {field: 'name', title: "名称", sort: true, fixed: 'left',width: "50%"}
                        ,{field: 'tags', title: '版本',  sort: true,width: "50%"}
                    ]
                ]
                /*,data:[
                    {
                        "id":"10001"
                        ,"name": "杜甫"
                        ,"operatorName": "test@email.com"
                        ,"createTime": "男"
                        ,"operateAccount": "浙江杭州"
                        ,"operatorRole": "人生恰似一场修行"
                        ,"result": "116"
                    }
                ]*/
                ,parseData:function(data){
                    console.info(data.data);
                    return {
                        "code": data.code, //解析接口状态
                        "msg": data.msg, //解析提示文本
                        "count":data.data.total, //解析数据长度
                        "data": data.data.list //解析数据列表
                    };
                }
                ,id: 'reload1'
            });

            //搜索表格重载
            let active = {
                reload: function(){
                    let demoReload = $('#demoReload3');

                    console.log(demoReload.val());
                    //执行重载
                    table.reload('reload1', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        }
                        ,where: {
                            name: demoReload.val()
                        }
                    }, 'data');
                }
            };
            $('#btn-reload-3').on('click', function(){
                let type = $(this).data('type');
                active[type] ? active[type].call(this) : '';
            });



        });
    });
</script>
